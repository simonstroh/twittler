<!DOCTYPE html>
<html>
  <head>
    <script src="jquery.js"></script>
    <script src="data_generator.js"></script>
    <style>
    @font-face {
      font-family: "Krungthep";
      src: url('Krungthep.ttf') format('truetype');
    }
    .page {
      max-width: 604px;
      margin: 0 auto;
      margin-bottom: 100px;
    }
    .back-to-top {
      position: fixed;
      bottom: 0;
      right: 0;
      width: 100%;
      height: 30px;
    }
    .back-to-top p {
      font-family: "Krungthep";
      font-size: 12pt;
      padding: 0;
      margin: 0;
    }
    a {
      text-align: right;
      color: black;
      text-decoration: none;
    }
    .wrapper {
      width: 604px;
      background-color: transparent;
    }
    .post-wrapper {
      padding-bottom: 20px;
      margin-bottom: 20px;
    }
    .time-value {
      font-family: "Krungthep";
      float: left;
      font-size: 20pt;
      width: 120px;
      height: 58px;
      padding: 10px 20px 5px 20px;
      border-bottom: 2px solid #cecece;
      color: #cecece;
      margin-right: 20px;
    }
    .name-value {
      font-family: "Krungthep";
      margin-top: 30px;
      font-size: 18pt;
      color: black;
    }
    .name-value img {
      float: left;
      margin-top: 6px;
      margin-right: 8px;
    }
    img:hover {
      opacity: 0.4;
    }
    .name-value p {
      padding: 0;
      margin: 0;
    }
    .comment-value {
      font-family: "Krungthep";
      width: 340px;
      margin-top: 10px;
      margin-left: 200px;
      padding: 0 30px;
      border-radius: 22px;
      border: 2px solid black;
      overflow: hidden;
      font-size: 18pt;
      color: black;
    }
    .get-new-tweets {
      font-family: Krungthep;
      font-size: 18pt;
      padding: 0;
      margin: 0;
      cursor: pointer;
      text-align: right;
      padding: 10px 0;
    }
    img {
      cursor: pointer;
      float: right;
      padding: 0 20px;
      transition: 0.3s;
    }
    </style>
  </head>
  <body>
    <div class="page">
    </div>
    <a href="#">
      <div class="back-to-top">
        <img style="transform: rotate(180deg)" src="open.svg" width="auto" height="20px">
        <p>back to top</p>
      </div>
    </a>
    <script>
      $(document).ready(function(){
        var $body = $('.page');
        var index = streams.home.length - 1;
        while(index >= 0){
          var tweet = streams.home[index];
          var post = $('<div></div>').css({'width':'604px','background-color':'transparent'}).addClass('post-wrapper')
          $(post).appendTo($body);
          var time = $('<div></div>').css({'font-family':'\'Krungthep\'','float':'left','font-size':'18pt','width':'120px','padding':'0 20px 12px 20px','border-bottom':'3px solid #cecece','border-radius':'8px','color':'#cecece','margin-right':'20px'})
          var time2 = $('<div></div>').css({'font-family':'\'Krungthep\'','float':'left','font-size':'18pt','width':'120px','padding':'0 20px 12px 20px','border-bottom':'3px solid #cecece','border-radius':'8px','color':'#cecece','margin-right':'20px'})
          var date = tweet.created_at
          var name = $('<div></div>').css({'font-family':'\'Krungthep\'','margin-top':'30px','font-size':'18pt','color':'black'}).addClass('name-class')
          var comment = $('<div></div>').css({'font-family':'\'Krungthep\'','width':'340px','margin-top':'12px','margin-left':'200px','padding':'0 30px','border-radius':'22px','border':'2px solid black','overflow':'hidden','font-size':'18pt','color':'black'})
          $(time).text(date.toLocaleTimeString('en-US'))
          $(name).text('@' + tweet.user + ' -')
          $(comment).text(tweet.message)
          $(time).appendTo(post)
          $(name).appendTo(post)
          $(comment).appendTo(post)
          index -= 1;
        }]



        var currentIndex = streams.home.length - 1

        var twitButton = $('<div><img src="at_sign.svg" width="auto" height="50px"><p class="get-new-tweets">Get new tweets</p></div>')
        $(twitButton).on('click', function() {
          var newIndex = streams.home.length - 1
          for (i = newIndex; i > currentIndex; i--) {
            var tweet = streams.home[i];
            var post = $('<div></div>').css({'width':'604px','background-color':'transparent'})
            $(post).appendTo($body);
            var time = $('<div></div>').css({'font-family':'\'Krungthep\'','float':'left','font-size':'18pt','width':'120px','padding':'0 20px 12px 20px','border-bottom':'3px solid #cecece','border-radius':'8px','color':'#cecece','margin-right':'20px'})
            var name = $('<div></div>').css({'font-family':'\'Krungthep\'','margin-top':'30px','font-size':'18pt','color':'black'})
            $(name).find('img').css({'float':'left','margin-top':'6px','margin-right':'8px'})
            var comment = $('<div></div>').css({'font-family':'\'Krungthep\'','width':'340px','margin-top':'12px','margin-left':'200px','padding':'0 30px','border-radius':'22px','border':'2px solid black','overflow':'hidden','font-size':'18pt','color':'black'})
            $(time).text(date.toLocaleTimeString('en-US'))
            $(name).text('@' + tweet.user + ' -')
            $(comment).text(tweet.message)
            $(time).appendTo(post)
            $(name).appendTo(post)
            $(comment).appendTo(post)
          }
        })

        $('.name-class').on('click', function() {
          var thisText = $(this).text()
          var newArray = []
          console.log(thisText.slice(1, thisText.length - 2))
          for (i = 0; i < sum; i++) {
            if (thisText !== $('.name-class')[i].innerHTML) {
              $(this).parent().hide()
            }
            var indexedItem = $('.name-class')[i]
            if (thisText !== indexedItem.innerHTML) {
              newArray.push(i)
            }
          }
          console.log(newArray)
        })

        $body.prepend(twitButton)

        //Alternative method is to use setTimeout and a for loop up to a million seconds
      });
    </script>
  </body>
</html>
